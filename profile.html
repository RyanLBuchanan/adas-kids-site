<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile Setup</title>
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Quicksand", sans-serif;
        background: linear-gradient(
          to bottom right,
          #1d8348,
          #145a32
        ); /* Muted Saudi green */
        color: #f1f5f9;
      }
      input,
      select {
        color: #94a3b8;
        background-color: #0f5132;
      }
      select option {
        color: #94a3b8;
        background-color: #0f5132;
      }
      .avatar-img-large {
        width: 12rem;
        height: 12rem;
        object-fit: cover;
        border-radius: 9999px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center px-4">
    <!-- Saudi Vision 2030 Logo Placeholder -->
    <img
      src="/assets/vision2030-logo.png"
      alt="Saudi Vision 2030 Logo"
      class="absolute top-4 left-4 h-12"
    />
    <div
      class="bg-white bg-opacity-10 p-8 rounded-xl shadow-lg w-full max-w-md border border-slate-600"
    >
      <h1 class="text-3xl font-bold text-center mb-4" data-i18n="profileTitle">
        👤 Your Profile
      </h1>
      <p class="text-center text-slate-300 mb-6" data-i18n="profileDesc">
        Final step—just a few details to personalize your session.
      </p>
      <form action="avatar.html" method="GET" class="space-y-4">
        <input type="hidden" id="avatar-choice" name="avatar" />
        <input type="hidden" id="lang-choice" name="language" />

        <div>
          <label
            class="block mb-1 font-semibold text-slate-200"
            data-i18n="nameLabel"
            >Your Name</label
          >
          <input
            type="text"
            name="name"
            required
            class="w-full p-3 border border-slate-600 bg-slate-800 text-slate-300 rounded-lg"
            placeholder="Enter your name"
            data-i18n-placeholder="namePlaceholder"
          />
        </div>

        <div>
          <label
            class="block mb-1 font-semibold text-slate-200"
            data-i18n="ageLabel"
            >Your Age or Grade Level</label
          >
          <input
            type="text"
            name="age"
            required
            class="w-full p-3 border border-slate-600 bg-slate-800 text-slate-300 rounded-lg"
            placeholder="e.g., 20 or Sophomore"
            data-i18n-placeholder="agePlaceholder"
          />
        </div>

        <div class="pt-4">
          <button
            type="submit"
            class="w-full bg-pink-500 text-white py-3 rounded-lg font-semibold shadow hover:bg-pink-600"
            data-i18n="continueBtn"
          >
            Continue →
          </button>
        </div>
      </form>
    </div>

    <!-- include your translation & i18n script last -->
    <script src="js/script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // 1️⃣ Your translation table
        const translations = {
          en: {
            home: "Home",
            vision: "Vision",
            demo: "Saudi Demo",
            reports: "Reports",
            settings: "Settings",
            talkAda: "Talk to Ada",

            preferredLang: "Preferred Language",
            existingUser: "👤 Existing User",
            username: "Username",
            password: "Password",
            loginBtn: "Log In →",

            newUser: "✨ New to Ada's Kids?",
            newUserDesc:
              "Create a profile to begin your personalized learning journey.",
            createProf: "Create Profile →",

            placeholder: "Your name",
            selectLang: "Select a language",
            profileTitle: "Your Profile",
            profileDesc:
              "Final step—just a few details to personalize your session.",
            nameLabel: "Your Name",
            namePlaceholder: "Enter your name",
            ageLabel: "Your Age or Grade Level",
            agePlaceholder: "e.g., 20 or Sophomore",
            continueBtn: "Continue →",
          },

          es: {
            home: "Inicio",
            vision: "Visión",
            demo: "Demostración saudí",
            reports: "Informes",
            settings: "Configuración",
            talkAda: "Hablar con Ada",

            preferredLang: "Idioma preferido",
            existingUser: "👤 Usuario existente",
            username: "Nombre de usuario",
            password: "Contraseña",
            loginBtn: "Iniciar sesión →",

            newUser: "✨ ¿Nuevo en Ada's Kids?",
            newUserDesc:
              "Crea un perfil para comenzar tu viaje de aprendizaje personalizado.",
            createProf: "Crear perfil →",

            placeholder: "Tu nombre",
            selectLang: "Selecciona un idioma",
            profileTitle: "Tu perfil",
            profileDesc:
              "Último paso: solo algunos datos para personalizar tu sesión.",
            nameLabel: "Tu nombre",
            namePlaceholder: "Ingresa tu nombre",
            ageLabel: "Tu edad o nivel de grado",
            agePlaceholder: "p. ej., 20 o segundo año",
            continueBtn: "Continuar →",
          },

          fr: {
            home: "Accueil",
            vision: "Vision",
            demo: "Démo saoudienne",
            reports: "Rapports",
            settings: "Paramètres",
            talkAda: "Parler à Ada",

            preferredLang: "Langue préférée",
            existingUser: "👤 Utilisateur existant",
            username: "Nom d’utilisateur",
            password: "Mot de passe",
            loginBtn: "Se connecter →",

            newUser: "✨ Nouveau sur Ada’s Kids ?",
            newUserDesc:
              "Créez un profil pour commencer votre parcours d'apprentissage personnalisé.",
            createProf: "Créer un profil →",

            placeholder: "Votre nom",
            selectLang: "Sélectionnez une langue",
            profileTitle: "Votre profil",
            profileDesc:
              "Étape finale — quelques détails pour personnaliser votre session.",
            nameLabel: "Votre nom",
            namePlaceholder: "Entrez votre nom",
            ageLabel: "Votre âge ou niveau scolaire",
            agePlaceholder: "ex. 20 ou seconde",
            continueBtn: "Continuer →",
          },

          de: {
            home: "Startseite",
            vision: "Vision",
            demo: "Saudi-Demo",
            reports: "Berichte",
            settings: "Einstellungen",
            talkAda: "Mit Ada sprechen",

            preferredLang: "Bevorzugte Sprache",
            existingUser: "👤 Bestehender Benutzer",
            username: "Benutzername",
            password: "Passwort",
            loginBtn: "Anmelden →",

            newUser: "✨ Neu bei Ada’s Kids?",
            newUserDesc:
              "Erstellen Sie ein Profil, um Ihre persönliche Lernreise zu starten.",
            createProf: "Profil erstellen →",

            placeholder: "Ihr Name",
            selectLang: "Sprache auswählen",
            profileTitle: "Ihr Profil",
            profileDesc:
              "Letzter Schritt – nur ein paar Details, um Ihre Sitzung zu personalisieren.",
            nameLabel: "Ihr Name",
            namePlaceholder: "Geben Sie Ihren Namen ein",
            ageLabel: "Ihr Alter oder Klassenstufe",
            agePlaceholder: "z. B. 20 oder 11. Klasse",
            continueBtn: "Weiter →",
          },

          zh: {
            home: "首页",
            vision: "愿景",
            demo: "沙特演示",
            reports: "报告",
            settings: "设置",
            talkAda: "与 Ada 对话",

            preferredLang: "首选语言",
            existingUser: "👤 现有用户",
            username: "用户名",
            password: "密码",
            loginBtn: "登录 →",

            newUser: "✨ 新用户？",
            newUserDesc: "创建个人资料，开始您的个性化学习之旅。",
            createProf: "创建个人资料 →",

            placeholder: "您的名字",
            selectLang: "请选择语言",
            profileTitle: "您的个人资料",
            profileDesc: "最后一步——只需提供一些详细信息以个性化您的会话。",
            nameLabel: "您的姓名",
            namePlaceholder: "请输入您的姓名",
            ageLabel: "您的年龄或年级",
            agePlaceholder: "例如，20 或 大二",
            continueBtn: "继续 →",
          },

          ar: {
            home: "الرئيسية",
            vision: "الرؤية",
            demo: "عرض سعودي",
            reports: "التقارير",
            settings: "الإعدادات",
            talkAda: "التحدث مع Ada",

            preferredLang: "اللغة المفضلة",
            existingUser: "👤 مستخدم حالي",
            username: "اسم المستخدم",
            password: "كلمة المرور",
            loginBtn: "تسجيل الدخول →",

            newUser: "✨ جديد في أطفال آدا؟",
            newUserDesc:
              "أنشئ ملفًا شخصيًا لبدء رحلة التعلم المخصصة الخاصة بك.",
            createProf: "إنشاء ملف التعريف →",

            placeholder: "اسمك",
            selectLang: "اختر اللغة",
            profileTitle: "ملفك الشخصي",
            profileDesc: "الخطوة الأخيرة—بعض التفاصيل فقط لتخصيص جلستك.",
            nameLabel: "اسمك",
            namePlaceholder: "أدخل اسمك",
            ageLabel: "عمرك أو الصف الدراسي",
            agePlaceholder: "مثلاً: 20 أو الصف العاشر",
            continueBtn: "متابعة →",
          },

          it: {
            home: "Home",
            vision: "Visione",
            demo: "Demo Saudita",
            reports: "Report",
            settings: "Impostazioni",
            talkAda: "Parla con Ada",

            preferredLang: "Lingua preferita",
            existingUser: "👤 Utente esistente",
            username: "Nome utente",
            password: "Password",
            loginBtn: "Accedi →",

            newUser: "✨ Nuovo in Ada’s Kids?",
            newUserDesc:
              "Crea un profilo per iniziare il tuo percorso di apprendimento personalizzato.",
            createProf: "Crea profilo →",

            placeholder: "Il tuo nome",
            selectLang: "Seleziona una lingua",
            profileTitle: "Il tuo profilo",
            profileDesc:
              "Passaggio finale—solo alcuni dettagli per personalizzare la tua sessione.",
            nameLabel: "Il tuo nome",
            namePlaceholder: "Inserisci il tuo nome",
            ageLabel: "La tua età o livello scolastico",
            agePlaceholder: "es., 20 o secondo anno",
            continueBtn: "Continua →",
          },
          af: {
            home: "Tuis",
            vision: "Visie",
            demo: "Saoedi-demo",
            reports: "Verslae",
            settings: "Instellings",
            talkAda: "Praat met Ada",

            preferredLang: "Geselekteerde taal",
            existingUser: "👤 Bestaande gebruiker",
            username: "Gebruikersnaam",
            password: "Wagwoord",
            loginBtn: "Teken in →",

            newUser: "✨ Nuut by Ada’s Kids?",
            newUserDesc:
              "Skep ’n profiel om jou gepersonaliseerde leerreis te begin.",
            createProf: "Skep profiel →",

            placeholder: "Jou naam",
            selectLang: "Kies ’n taal",

            settingsTitle: "Instellings | Ada's Kids",
            settingsHeading: "⚙️ Instellings",
            customizeHeading: "Pas jou ervaring aan",
            colorTheme: "Kleurtema",
            themeDark: "Donker (verstek)",
            themeLight: "Lig",
            themeContrast: "Kontraskontras",
            languageLabel: "Taal",
            voiceOutputLabel: "Skakel stemuitset in",
            voiceOutputDesc: "Ada sal boodskappe hardop voorlees",
            emailNotifLabel: "E-poskennisgewings",
            emailNotifDesc: "Kry opdaterings oor leer vordering",
            saveSettings: "Stoor instellings",
            profileTitle: "Jou profiel",
            profileDesc:
              "Laaste stap—net ’n paar besonderhede om jou sessie te personaliseer.",
            nameLabel: "Jou naam",
            namePlaceholder: "Voer jou naam in",
            ageLabel: "Jou ouderdom of graadvlak",
            agePlaceholder: "bv., 20 of tweede jaar",
            continueBtn: "Gaan voort →",
          },
        };

        // 2️⃣ Helper to swap all [data-i18n] tags
        function translatePage(lang) {
          // 1) swap all [data-i18n] innerText
          document.querySelectorAll("[data-i18n]").forEach((el) => {
            const key = el.getAttribute("data-i18n");
            const txt = translations[lang]?.[key];
            if (txt) el.innerText = txt;
          });

          // 2) **new** — swap all [data-i18n-placeholder] placeholders
          document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
            const key = el.getAttribute("data-i18n-placeholder");
            const txt = translations[lang]?.[key];
            if (txt) el.setAttribute("placeholder", txt);
          });
        }

        // 3️⃣ Read the current ?language=… or default
        const params = new URLSearchParams(location.search);
        let lang = params.get("language");
        if (!translations[lang]) lang = "en";

        // 4️⃣ Initial render
        translatePage(lang);

        // 5️⃣ Wire up the <select id="language-select">
        const sel = document.getElementById("language-select");
        if (sel) {
          sel.value = lang;
          sel.addEventListener("change", () => {
            lang = sel.value;
            params.set("language", lang);
            translatePage(lang);
            history.replaceState(null, "", "?" + params.toString());

            // keep hidden login field in sync
            const hidden = document.getElementById("language-choice");
            if (hidden) hidden.value = lang;

            // update all nav links so they carry ?language=…
            document.querySelectorAll("header nav a[href]").forEach((a) => {
              const url = new URL(a.href, location.origin);
              url.searchParams.set("language", lang);
              a.href = url.toString();
            });
          });
        }
      });
    </script>
    <!-- then this inline bootstrapper -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const params = new URLSearchParams(location.search);
        // 1) figure out which lang we're in
        let lang = params.get("language") || "en";
        // 2) stick it in the hidden field so avatar.html also sees it
        const hiddenLang = document.getElementById("lang-choice");
        if (hiddenLang) hiddenLang.value = lang;
        // 3) translate all [data-i18n] and [data-i18n-placeholder]
        if (typeof translatePage === "function") {
          translatePage(lang);
        }
      });
    </script>
  </body>
</html>
