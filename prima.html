<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Talk to Prima</title>
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />

    <!-- Tailwind CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />

    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Quicksand", sans-serif;
        /* Darker teal-to-deep lavender gradient */
        background: linear-gradient(to bottom right, #80cbc4, #7e57c2);
        color: #eceff1;
      }
      #chat-log {
        background-color: #37474f; /* dark slate */
      }
      input,
      select {
        color: #eceff1;
        background-color: #546e7a; /* darker grey-blue */
        border-color: #81c784; /* subtle green accent */
      }
      input::placeholder {
        color: #cfd8dc;
      }
      button {
        background-color: #26a69a; /* deeper teal */
        color: #eceff1;
      }
      button:hover {
        background-color: #00796b; /* darker teal */
      }
      .avatar-img {
        width: 12rem;
        height: auto;
        object-fit: contain;
      }
      form {
        background-color: #455a64; /* for input area */
        padding: 0.5rem;
        border-radius: 0.5rem;
      }
    </style>

    <script>
      window.onload = () => {
        const params = new URLSearchParams(window.location.search);
        const name = params.get("name") || "Friend";
        const avatar = params.get("avatar") || "prima";
        document.getElementById(
          "personal-greeting"
        ).innerText = `Hi ${name}, I'm Prima.`;
        document.getElementById(
          "avatar-persona"
        ).innerText = `Tutor Style: ${formatAvatarName(avatar)}`;
      };

      function formatAvatarName(avatar) {
        switch (avatar) {
          case "jarvis":
            return "J.A.R.V.I.S. (Concise & Logical)";
          case "cortana":
            return "Cortana (Helpful & Friendly)";
          case "alfred":
            return "Alfred (Wise & Supportive)";
          case "enterprise-computer":
            return "Starfleet Computer (Precise & Formal)";
          default:
            return "Prima (Curious & Kind)";
        }
      }
    </script>
  </head>

  <body class="min-h-screen fade-in">
    <!-- Header -->
    <header class="text-center py-6 shadow">
      <h1 id="personal-greeting" class="text-3xl font-bold">Hi, I'm Prima.</h1>
      <p id="avatar-persona" class="text-sm">Your AI tutor is here to help.</p>
    </header>

    <!-- Chat & Avatar Container -->
    <main class="flex flex-col lg:flex-row max-w-4xl mx-auto px-4 py-10 gap-6">
      <!-- Left: Chat -->
      <div class="flex-1">
        <div
          id="chat-log"
          class="rounded-xl shadow-inner h-96 overflow-y-auto p-4 mb-6"
        ></div>

        <!-- Chat Input Form -->
        <form id="ask-form" class="flex space-x-2">
          <input
            type="text"
            id="user-input"
            placeholder="Ask me anything..."
            class="flex-1 p-3 border rounded-lg bg-transparent"
            required
          />
          <button
            type="submit"
            class="px-6 py-2 rounded-lg font-semibold shadow drop-shadow-glow hover:scale-105"
          >
            Send
          </button>
        </form>
      </div>

      <!-- Right: Avatar Placeholder -->
      <div class="hidden lg:flex flex-col items-center w-48">
        <img
          src="/assets/avatars/prima.png"
          alt="Prima Avatar"
          class="avatar-img rounded-full shadow-lg mb-4"
        />
        <p class="text-center">Prima</p>
      </div>
    </main>

    <footer class="text-center py-4 text-sm">
      <a href="/" class="underline hover:text-gray-300">‚Üê Back to Home</a>
    </footer>

    <!-- Scripts -->
    <script src="js/prima.js"></script>
  </body>
</html>
